<header class="bg-white sticky top-0 z-40">
  <div
    class="mx-auto flex h-16 max-w-screen-xxl items-center gap-8 px-4 sm:px-6 lg:px-8 shadow-md"
  >
    <!-- Logo -->
    <img src="assets/logo.svg" alt="logo" class="h-8 w-auto" />

    <!-- Desktop Navigation -->
    <div class="flex flex-1 items-center justify-end md:justify-between">
      <nav aria-label="Global" class="hidden md:block">
        <ul class="flex items-center gap-6 text-sm">
          <li>
            <a
              routerLink="/"
              routerLinkActive="text-teal-600 font-medium"
              class="text-gray-500 transition hover:text-gray-500/75"
            >
              Home
            </a>
          </li>
          <li>
            <a
              routerLink="/explore"
              routerLinkActive="text-teal-600 font-medium"
              class="text-gray-500 transition hover:text-gray-500/75"
            >
              Explore
            </a>
          </li>
          <li>
            <a
              routerLink="/projects"
              routerLinkActive="text-teal-600 font-medium"
              class="text-gray-500 transition hover:text-gray-500/75"
            >
              Projects
            </a>
          </li>
          <li>
            <a
              routerLink="/about-us"
              routerLinkActive="text-teal-600 font-medium"
              class="text-gray-500 transition hover:text-gray-500/75"
            >
              About Us
            </a>
          </li>
        </ul>
      </nav>

      <div
        class="flex flex-row justify-between gap-1"
        *ngIf="isUserLoggedIn$ | async"
      >
        <div class="flex flex-row justify-between gap-2 items-center">
          <span
            class="hidden font-bold md:flex flex-row cursor-pointer"
            (click)="onOpenCartDropDown()"
          >
            <lucide-angular
              [img]="cartIcon"
              strokeWidth="2"
              class="my-icon"
            ></lucide-angular>
            &#40;{{ cartItemsCount | async }}&#41;
          </span>
          <span
            class="font-bold flex md:hidden flex-row cursor-pointer"
            [routerLink]="'/cart'"
          >
            <lucide-angular
              [img]="cartIcon"
              strokeWidth="2"
              class="my-icon"
            ></lucide-angular>
            &#40;{{ cartItemsCount | async }}&#41;
          </span>
          <clerk-user-button class="mt-2 hidden md:block" />
          <button
            class="block rounded-sm bg-gray-100 p-2.5 text-gray-600 transition hover:text-gray-600/75 md:hidden"
            (click)="onToggleMobileMenu()"
            [attr.aria-expanded]="isMobileMenuOpen"
          >
            <span class="sr-only">Toggle menu</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                *ngIf="!isMobileMenuOpen"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              />
              <path
                *ngIf="isMobileMenuOpen"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>

        @if (isCartDropDownOpen) {
        <app-cart-drop-down (isOpen)="onOpenCartDropDown()" />
        }
      </div>

      <!-- Cart Dropdown -->

      <!-- Logged Out State -->
      <div class="hidden md:flex sm:gap-4" *ngIf="!(isUserLoggedIn$ | async)">
        <a
          routerLink="/auth/login"
          class="block rounded-md bg-teal-600 px-5 py-2.5 text-sm font-medium text-white transition hover:bg-teal-700"
        >
          Login
        </a>
        <a
          routerLink="/auth/register"
          class="hidden rounded-md bg-gray-100 px-5 py-2.5 text-sm font-medium text-teal-600 transition hover:text-teal-600/75 sm:block"
        >
          Register
        </a>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    class="md:hidden fixed inset-0 bg-white z-30 mt-16 transition-all duration-300 ease-in-out overflow-y-auto"
    [class.opacity-0]="!isMobileMenuOpen"
    [class.invisible]="!isMobileMenuOpen"
    [class.opacity-100]="isMobileMenuOpen"
    [class.visible]="isMobileMenuOpen"
  >
    <div class="px-4 py-6 space-y-6">
      <nav aria-label="Mobile navigation">
        <ul class="flex flex-col space-y-4">
          <li>
            <a
              routerLink="/"
              routerLinkActive="text-teal-600 font-medium"
              class="block py-2 text-lg text-gray-700 hover:text-teal-600 transition"
              (click)="onToggleMobileMenu()"
            >
              Home
            </a>
          </li>
          <li>
            <a
              routerLink="/explore"
              routerLinkActive="text-teal-600 font-medium"
              class="block py-2 text-lg text-gray-700 hover:text-teal-600 transition"
              (click)="onToggleMobileMenu()"
            >
              Explore
            </a>
          </li>
          <li>
            <a
              routerLink="/projects"
              routerLinkActive="text-teal-600 font-medium"
              class="block py-2 text-lg text-gray-700 hover:text-teal-600 transition"
              (click)="onToggleMobileMenu()"
            >
              Projects
            </a>
          </li>
          <li>
            <a
              routerLink="/about-us"
              routerLinkActive="text-teal-600 font-medium"
              class="block py-2 text-lg text-gray-700 hover:text-teal-600 transition"
              (click)="onToggleMobileMenu()"
            >
              About Us
            </a>
          </li>
        </ul>
      </nav>

      <div *ngIf="isUserLoggedIn$ | async">
        <clerk-user-profile />
      </div>

      <div
        *ngIf="!(isUserLoggedIn$ | async)"
        class="pt-6 border-t border-gray-200"
      >
        <div class="flex flex-col space-y-4">
          <a
            routerLink="/auth/login"
            class="w-full rounded-md bg-teal-600 px-5 py-2.5 text-center text-sm font-medium text-white transition hover:bg-teal-700"
            (click)="onToggleMobileMenu()"
          >
            Login
          </a>
          <a
            routerLink="/auth/register"
            class="w-full rounded-md bg-gray-100 px-5 py-2.5 text-center text-sm font-medium text-teal-600 transition hover:text-teal-600/75"
            (click)="onToggleMobileMenu()"
          >
            Register
          </a>
        </div>
      </div>
    </div>
  </div>
</header>
